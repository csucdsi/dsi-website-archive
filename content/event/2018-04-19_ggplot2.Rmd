---
title: 'Data Visualization using ggplot2'
author: 'Robin Donatello'
slug: ggplot2_intro2
draft: true
description: '04-19-18 Workshop materials'
---

# Preparation

To get the most out of this workshop you should have the following installed on your laptop: 

* R Version 3.3+
    - with installed packages: `ggplot2`, `ggmap`, `MASS`
* R Studio version 1.1+


```{r, echo=FALSE}
library(ggplot2)
knitr::opts_chunk$set(eval=FALSE, echo = TRUE, fig.height=4, fig.width=6)
```


Using the `survey` data set that is built into the `MASS` package, we will create several plots. 
Let's load this into our working directory. 
```{r}
survey <- MASS::survey
```

# One categorical variable

## Barchart
A barchart of how often the responders excercised in the past month. `geom_bar` makes the height of the bar proportional to the number of cases in each group. 

```{r}
cdc$smoke_char <- factor(cdc$smoke100, labels=c("No", "Yes"))
ggplot(cdc, aes(x=exerany, fill=smoke_char)) + geom_bar(position="dodge")
```


# One numeric variable

## Histograms and densities
of age, with an overlaid density plot in a different color.

```{r, fig.height=4, fig.width=4}
ggplot(cdc, aes(x=age)) + geom_density(col="blue") + 
  geom_histogram(aes(y=..density..), colour="black", fill=NA)
```
    
## Boxplots
A boxplot of weight.

```{r}
boxplot(cdc$weight, horizontal = TRUE, main="Distribution of respondants weight", xlab="Pounds")
```

# Two categorical variables 

## Grouped barchart
of exercise frequency _within_ smoking status. 

```{r}
ggplot(cdc, aes(x=smoke_char, fill=genhlth)) + geom_bar(position="dodge")
```


# Two numeric variables
## Scatterplots
A scatterplot of the weight against desired weight

```{r}
plot(weight~wtdesire, data=cdc)
```

a. Add a best fit line in purple.

```{r}
plot(weight~wtdesire, data=cdc)
abline(lm(weight~wtdesire, data=cdc), col="purple")
```


# One numeric and one categorical

## Overlaid density plots. 

Overlaid density plots of height by gender. No fill, color only.

```{r}
ggplot(cdc, aes(x=height, col=gender)) + geom_density()
```

## Paneled histograms
Histogram of weight paneled by gender

a. where the panels are horizontal (1 row 2 columns)
   
```{r}
ggplot(cdc, aes(x=weight, fill=gender)) + geom_histogram() + facet_wrap(~gender)
```
   
b. where the panels are vertical (2 rows 1 column)

```{r}
ggplot(cdc, aes(x=weight, fill=gender)) + geom_histogram() + facet_wrap(~gender, ncol=1)
```


# Two numerical and one categorical

## Scatterplots with color

A scatterplot of height (y) against weight (x) grouped by gender (you can choose grouping by shape or color)
    
```{r}
ggplot(cdc, aes(x=height, y=weight, color=gender)) + geom_point()
```

## Stratified scatterplots with paneling
A scatterplot of height against age paneled (faceted) by general health status.
    
```{r}
ggplot(cdc, aes(x=age, y=height, color=genhlth)) + geom_point() + facet_grid(~genhlth)
```


# One numerical and two categorical

## Grouped boxplots 
Desired weight by exercise & gender. Put one categorical on the x, fill the box color by the other. 
  
```{r}
ggplot(cdc, aes(x=exerany, y=wtdesire, fill=gender)) + geom_boxplot()
```    

## Grouped boxplots with paneling
Same plot as above, but now panel by smoking status category. 

```{r}
ggplot(cdc, aes(x=exerany, y=wtdesire, fill=gender)) + geom_boxplot() +
  facet_wrap(~smoke_char, ncol=2)
```    